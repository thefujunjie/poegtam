<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­—çˆ†ç‚¸æ¸¸æˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF5722',
                        secondary: '#FFC107',
                        danger: '#F44336',
                        dark: '#212121',
                        light: '#F5F5F5',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'shake': 'shake 0.5s ease-in-out',
                        'explode': 'explode 1.5s ease-out forwards',
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                        'scale-in': 'scaleIn 0.5s ease-out forwards',
                        'rotate': 'rotate 0.8s linear infinite',
                    },
                    keyframes: {
                        shake: {
                            '0%, 100%': { transform: 'translateX(0)' },
                            '25%': { transform: 'translateX(-10px)' },
                            '75%': { transform: 'translateX(10px)' },
                        },
                        explode: {
                            '0%': { transform: 'scale(0)', opacity: '1' },
                            '50%': { transform: 'scale(1.2)', opacity: '0.8' },
                            '100%': { transform: 'scale(2)', opacity: '0' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        rotate: {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' },
                        }
                    }
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .text-shadow-lg {
                text-shadow: 0 4px 8px rgba(0,0,0,0.2);
            }
            .card-shadow {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }
            .gradient-bg {
                background: linear-gradient(135deg, #FF5722 0%, #F44336 100%);
            }
            .input-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-300;
            }
            .btn-hover {
                @apply hover:shadow-lg hover:-translate-y-1 transition-all duration-300;
            }
            .bomb {
                position: relative;
                width: 120px;
                height: 120px;
                margin: 0 auto;
                animation: scaleIn 0.5s ease-out forwards;
            }
            .bomb::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(circle, #FF5722 0%, #F44336 50%, #212121 100%);
                border-radius: 50%;
                box-shadow: 0 0 30px rgba(255, 87, 34, 0.7);
                animation: pulse 1s infinite alternate;
            }
            .bomb::after {
                content: 'ğŸ’£';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 60px;
                animation: rotate 2s linear infinite;
            }
            .explosion {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 400px;
                height: 400px;
                opacity: 0;
                animation: explode 1.5s ease-out forwards;
            }
            .explosion::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(circle, rgba(255,193,7,1) 0%, rgba(255,87,34,0.8) 40%, rgba(244,67,54,0.5) 70%, rgba(33,33,33,0) 100%);
                border-radius: 50%;
            }
            .explosion::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: 
                    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 40%),
                    radial-gradient(circle at 70% 40%, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 40%),
                    radial-gradient(circle at 40% 70%, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 40%);
                border-radius: 50%;
                animation: rotate 0.5s linear infinite;
            }
            .debris {
                position: absolute;
                width: 20px;
                height: 20px;
                background: linear-gradient(45deg, #FF5722, #F44336);
                border-radius: 3px;
                opacity: 0;
            }
            .debris-1 {
                top: 30%;
                left: 20%;
                animation: debris-1 1s ease-out forwards;
            }
            .debris-2 {
                top: 60%;
                left: 30%;
                animation: debris-2 1.2s ease-out forwards;
            }
            .debris-3 {
                top: 20%;
                left: 70%;
                animation: debris-3 0.9s ease-out forwards;
            }
            .debris-4 {
                top: 70%;
                left: 60%;
                animation: debris-4 1.1s ease-out forwards;
            }
            .debris-5 {
                top: 40%;
                left: 10%;
                animation: debris-5 1.3s ease-out forwards;
            }
            .debris-6 {
                top: 50%;
                left: 90%;
                animation: debris-6 1s ease-out forwards;
            }
            @keyframes debris-1 {
                0% { opacity: 0; transform: translate(0, 0); }
                20% { opacity: 1; }
                100% { opacity: 0; transform: translate(-100px, -80px); }
            }
            @keyframes debris-2 {
                0% { opacity: 0; transform: translate(0, 0); }
                20% { opacity: 1; }
                100% { opacity: 0; transform: translate(-60px, 120px); }
            }
            @keyframes debris-3 {
                0% { opacity: 0; transform: translate(0, 0); }
                20% { opacity: 1; }
                100% { opacity: 0; transform: translate(140px, -60px); }
            }
            @keyframes debris-4 {
                0% { opacity: 0; transform: translate(0, 0); }
                20% { opacity: 1; }
                100% { opacity: 0; transform: translate(80px, 100px); }
            }
            @keyframes debris-5 {
                0% { opacity: 0; transform: translate(0, 0); }
                20% { opacity: 1; }
                100% { opacity: 0; transform: translate(-120px, 20px); }
            }
            @keyframes debris-6 {
                0% { opacity: 0; transform: translate(0, 0); }
                20% { opacity: 1; }
                100% { opacity: 0; transform: translate(100px, 40px); }
            }
            @keyframes pulse {
                0% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 87, 34, 0.5); }
                100% { transform: scale(1.05); box-shadow: 0 0 30px rgba(255, 87, 34, 0.8); }
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans text-dark">
    <div id="app" class="max-w-4xl mx-auto px-4 py-8">
        <!-- æ¬¢è¿é¡µé¢ -->
        <div id="welcome-screen" class="transition-all duration-500">
            <div class="text-center mb-10 animate-fade-in">
                <h1 class="text-[clamp(2.5rem,5vw,4rem)] font-bold text-primary mb-4 text-shadow-lg">
                    <i class="fa fa-bomb mr-2 animate-bounce-slow"></i>æ•°å­—çˆ†ç‚¸
                </h1>
                <p class="text-gray-600 text-lg">çŒœä¸­æ•°å­—å°±ä¼šçˆ†ç‚¸ï¼è°æ˜¯æœ€å¹¸è¿çš„é‚£ä¸ªï¼Ÿ</p>
            </div>
            
            <div class="bg-white rounded-xl p-6 shadow-xl mb-8 animate-slide-up card-shadow">
                <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">é€‰æ‹©æ•°å­—èŒƒå›´</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                    <button id="range-100" class="bg-primary text-white p-4 rounded-lg text-xl font-semibold btn-hover">
                        0~100
                    </button>
                    <button id="range-200" class="bg-primary text-white p-4 rounded-lg text-xl font-semibold btn-hover">
                        0~200
                    </button>
                    <button id="range-500" class="bg-primary text-white p-4 rounded-lg text-xl font-semibold btn-hover">
                        0~500
                    </button>
                    <div class="relative">
                        <button id="custom-range-btn" class="w-full bg-gray-200 text-gray-700 p-4 rounded-lg text-xl font-semibold btn-hover">
                            è‡ªå®šä¹‰èŒƒå›´
                        </button>
                        <div id="custom-range-input" class="hidden absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-lg p-4 z-10">
                            <label class="block text-gray-700 mb-2">è¯·è¾“å…¥æœ€å¤§å€¼:</label>
                            <div class="flex">
                                <input id="custom-range-value" type="number" min="1" class="flex-1 p-2 border border-gray-300 rounded-l-lg input-focus" placeholder="ä¾‹å¦‚: 1000">
                                <button id="confirm-custom-range" class="bg-primary text-white p-2 rounded-r-lg">ç¡®å®š</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="player-setup" class="bg-white rounded-xl p-6 shadow-xl animate-slide-up card-shadow opacity-0 pointer-events-none transition-all duration-500">
                <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">è®¾ç½®ç©å®¶</h2>
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2">ç©å®¶æ•°é‡:</label>
                    <div class="flex justify-center space-x-4">
                        <button class="player-count-btn bg-gray-200 text-gray-700 p-3 rounded-lg text-lg font-medium btn-hover" data-count="2">2äºº</button>
                        <button class="player-count-btn bg-gray-200 text-gray-700 p-3 rounded-lg text-lg font-medium btn-hover" data-count="3">3äºº</button>
                        <button class="player-count-btn bg-gray-200 text-gray-700 p-3 rounded-lg text-lg font-medium btn-hover" data-count="4">4äºº</button>
                    </div>
                </div>
                
                <div id="player-names" class="mb-6 space-y-4">
                    <!-- ç©å®¶åç§°è¾“å…¥æ¡†å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <button id="start-game" class="w-full gradient-bg text-white py-4 rounded-lg text-xl font-bold btn-hover disabled:opacity-50 disabled:pointer-events-none" disabled>
                    å¼€å§‹æ¸¸æˆ
                </button>
            </div>
        </div>
        
        <!-- æ¸¸æˆé¡µé¢ -->
        <div id="game-screen" class="hidden transition-all duration-500">
            <div class="text-center mb-6 animate-fade-in">
                <h1 class="text-[clamp(1.8rem,4vw,3rem)] font-bold text-primary mb-2 text-shadow">
                    <i class="fa fa-bomb mr-2"></i>æ•°å­—çˆ†ç‚¸
                </h1>
                <p class="text-gray-600 text-lg">çŒœä¸­æ­£ç¡®æ•°å­—å°±ä¼šçˆ†ç‚¸ï¼</p>
            </div>
            
            <div class="bg-white rounded-xl p-6 shadow-xl mb-8 animate-slide-up card-shadow">
                <div id="current-range" class="text-center mb-8">
                    <p class="text-gray-500 text-lg">å½“å‰èŒƒå›´:</p>
                    <p id="range-display" class="text-4xl font-bold text-primary">0 ~ 100</p>
                </div>
                
                <div id="guess-container" class="space-y-4 mb-8">
                    <!-- ç©å®¶çŒœæµ‹è¾“å…¥æ¡†å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div id="feedback" class="hidden text-center py-4 rounded-lg mb-6 text-xl font-bold"></div>
                
                <div class="text-center">
                    <button id="restart-game" class="gradient-bg text-white py-3 px-8 rounded-lg text-lg font-semibold btn-hover">
                        é‡æ–°å¼€å§‹
                    </button>
                </div>
            </div>
        </div>
        
        <!-- çˆ†ç‚¸é¡µé¢ -->
        <div id="explosion-screen" class="hidden fixed inset-0 flex items-center justify-center bg-black/80 z-50">
            <div class="text-center p-8 relative">
                <div class="bomb mx-auto mb-6"></div>
                <div class="explosion"></div>
                <div class="debris debris-1"></div>
                <div class="debris debris-2"></div>
                <div class="debris debris-3"></div>
                <div class="debris debris-4"></div>
                <div class="debris debris-5"></div>
                <div class="debris debris-6"></div>
                <h2 id="winner-text" class="text-4xl font-bold text-white mb-4 text-shadow-lg animate-fade-in">
                    ä½ çˆ†ç‚¸äº†ï¼
                </h2>
                <p id="answer-text" class="text-2xl text-white mb-8 animate-fade-in" style="animation-delay: 0.3s">
                    æ­£ç¡®ç­”æ¡ˆæ˜¯: <span class="text-primary font-bold">42</span>
                </p>
                <button id="play-again" class="bg-white text-primary py-3 px-8 rounded-lg text-xl font-bold btn-hover animate-fade-in" style="animation-delay: 0.6s">
                    å†ç©ä¸€æ¬¡
                </button>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            maxNumber: 100,
            answer: 0,
            currentRange: { min: 0, max: 100 },
            players: [],
            currentPlayerIndex: 0,
            gameStarted: false
        };

        // DOM å…ƒç´ 
        const welcomeScreen = document.getElementById('welcome-screen');
        const gameScreen = document.getElementById('game-screen');
        const explosionScreen = document.getElementById('explosion-screen');
        const playerSetup = document.getElementById('player-setup');
        const customRangeBtn = document.getElementById('custom-range-btn');
        const customRangeInput = document.getElementById('custom-range-input');
        const customRangeValue = document.getElementById('custom-range-value');
        const confirmCustomRange = document.getElementById('confirm-custom-range');
        const startGameBtn = document.getElementById('start-game');
        const playerNamesContainer = document.getElementById('player-names');
        const rangeDisplay = document.getElementById('range-display');
        const guessContainer = document.getElementById('guess-container');
        const feedback = document.getElementById('feedback');
        const winnerText = document.getElementById('winner-text');
        const answerText = document.getElementById('answer-text');
        const restartGameBtn = document.getElementById('restart-game');
        const playAgainBtn = document.getElementById('play-again');

        // èŒƒå›´é€‰æ‹©æŒ‰é’®
        document.getElementById('range-100').addEventListener('click', () => {
            setMaxNumber(100);
            showPlayerSetup();
        });
        
        document.getElementById('range-200').addEventListener('click', () => {
            setMaxNumber(200);
            showPlayerSetup();
        });
        
        document.getElementById('range-500').addEventListener('click', () => {
            setMaxNumber(500);
            showPlayerSetup();
        });
        
        // è‡ªå®šä¹‰èŒƒå›´
        customRangeBtn.addEventListener('click', () => {
            customRangeInput.classList.toggle('hidden');
        });
        
        confirmCustomRange.addEventListener('click', () => {
            const value = parseInt(customRangeValue.value, 10);
            if (value && value > 1) {
                setMaxNumber(value);
                showPlayerSetup();
                customRangeInput.classList.add('hidden');
            } else {
                alert('è¯·è¾“å…¥å¤§äº1çš„æ•°å­—');
            }
        });
        
        // ç©å®¶æ•°é‡é€‰æ‹©
        document.querySelectorAll('.player-count-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„æ´»è·ƒçŠ¶æ€
                document.querySelectorAll('.player-count-btn').forEach(b => {
                    b.classList.remove('bg-primary', 'text-white');
                    b.classList.add('bg-gray-200', 'text-gray-700');
                });
                
                // æ·»åŠ å½“å‰æŒ‰é’®çš„æ´»è·ƒçŠ¶æ€
                btn.classList.remove('bg-gray-200', 'text-gray-700');
                btn.classList.add('bg-primary', 'text-white');
                
                // è·å–ç©å®¶æ•°é‡å¹¶ç”Ÿæˆè¾“å…¥æ¡†
                const playerCount = parseInt(btn.dataset.count, 10);
                generatePlayerInputs(playerCount);
            });
        });
        
        // å¼€å§‹æ¸¸æˆ
        startGameBtn.addEventListener('click', startGame);
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        restartGameBtn.addEventListener('click', restartGame);
        playAgainBtn.addEventListener('click', restartGame);
        
        // è®¾ç½®æœ€å¤§å€¼
        function setMaxNumber(value) {
            gameState.maxNumber = value;
            gameState.currentRange = { min: 0, max: value };
        }
        
        // æ˜¾ç¤ºç©å®¶è®¾ç½®
        function showPlayerSetup() {
            playerSetup.classList.remove('opacity-0', 'pointer-events-none');
            // é»˜è®¤é€‰æ‹©2ä¸ªç©å®¶
            if (document.querySelectorAll('.player-count-btn.bg-primary').length === 0) {
                document.querySelector('.player-count-btn[data-count="2"]').click();
            }
        }
        
        // ç”Ÿæˆç©å®¶è¾“å…¥æ¡†
        function generatePlayerInputs(count) {
            playerNamesContainer.innerHTML = '';
            gameState.players = [];
            
            for (let i = 0; i < count; i++) {
                const playerNumber = i + 1;
                const div = document.createElement('div');
                div.className = 'flex items-center';
                div.innerHTML = `
                    <span class="bg-primary text-white w-10 h-10 flex items-center justify-center rounded-full mr-3">${playerNumber}</span>
                    <input type="text" class="player-name flex-1 p-3 border border-gray-300 rounded-lg input-focus" placeholder="ç©å®¶${playerNumber}åç§°" value="ç©å®¶${playerNumber}">
                `;
                playerNamesContainer.appendChild(div);
                
                // æ·»åŠ åˆ°ç©å®¶åˆ—è¡¨
                gameState.players.push({
                    id: i,
                    name: `ç©å®¶${playerNumber}`,
                    input: null
                });
            }
            
            // æ›´æ–°è¾“å…¥äº‹ä»¶ç›‘å¬
            updateNameInputs();
            checkStartButton();
        }
        
        // æ›´æ–°åç§°è¾“å…¥äº‹ä»¶
        function updateNameInputs() {
            document.querySelectorAll('.player-name').forEach((input, index) => {
                input.addEventListener('input', (e) => {
                    gameState.players[index].name = e.target.value;
                    checkStartButton();
                });
                
                // æ›´æ–°ç©å®¶å¯¹è±¡ä¸­çš„è¾“å…¥å¼•ç”¨
                gameState.players[index].input = input;
            });
        }
        
        // æ£€æŸ¥å¼€å§‹æŒ‰é’®çŠ¶æ€
        function checkStartButton() {
            const allFilled = gameState.players.every(player => player.name.trim() !== '');
            startGameBtn.disabled = !allFilled;
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            // ç”Ÿæˆéšæœºç­”æ¡ˆ
            gameState.answer = Math.floor(Math.random() * (gameState.maxNumber - 1)) + 1;
            console.log(`ç­”æ¡ˆ: ${gameState.answer}`); // ä»…ç”¨äºè°ƒè¯•
            
            // æ›´æ–°èŒƒå›´æ˜¾ç¤º
            rangeDisplay.textContent = `0 ~ ${gameState.maxNumber}`;
            
            // ç”ŸæˆçŒœæµ‹è¾“å…¥æ¡†
            generateGuessInputs();
            
            // æ˜¾ç¤ºæ¸¸æˆé¡µé¢
            welcomeScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            // å¼€å§‹æ¸¸æˆ
            gameState.gameStarted = true;
            updateCurrentPlayer();
        }
        
        // ç”ŸæˆçŒœæµ‹è¾“å…¥æ¡†
        function generateGuessInputs() {
            guessContainer.innerHTML = '';
            
            gameState.players.forEach((player, index) => {
                const div = document.createElement('div');
                div.className = `guess-input-container ${index === 0 ? 'bg-yellow-50 border-2 border-primary' : 'bg-gray-50'}`;
                div.innerHTML = `
                    <div class="flex items-center p-4 rounded-lg">
                        <span class="bg-primary text-white w-10 h-10 flex items-center justify-center rounded-full mr-3">${index + 1}</span>
                        <span class="player-label mr-3 font-semibold">${player.name}</span>
                        <input type="number" min="1" max="${gameState.maxNumber}" class="guess-input flex-1 p-3 border border-gray-300 rounded-lg input-focus ${index === 0 ? '' : 'opacity-50 cursor-not-allowed'}" placeholder="è¾“å…¥çŒœæµ‹çš„æ•°å­—" ${index === 0 ? '' : 'disabled'}>
                        <button class="guess-btn ml-3 bg-primary text-white py-3 px-6 rounded-lg font-semibold btn-hover ${index === 0 ? '' : 'opacity-50 cursor-not-allowed'}" ${index === 0 ? '' : 'disabled'}>
                            çŒœæµ‹
                        </button>
                    </div>
                `;
                guessContainer.appendChild(div);
                
                // æ›´æ–°ç©å®¶å¯¹è±¡ä¸­çš„è¾“å…¥å’ŒæŒ‰é’®å¼•ç”¨
                player.guessInput = div.querySelector('.guess-input');
                player.guessBtn = div.querySelector('.guess-btn');
                
                // æ·»åŠ çŒœæµ‹æŒ‰é’®äº‹ä»¶
                player.guessBtn.addEventListener('click', () => handleGuess(player));
            });
        }
        
        // å¤„ç†çŒœæµ‹
        function handleGuess(player) {
            const guess = parseInt(player.guessInput.value, 10);
            
            // éªŒè¯è¾“å…¥
            if (isNaN(guess) || guess <= gameState.currentRange.min || guess >= gameState.currentRange.max) {
                feedback.textContent = `è¯·è¾“å…¥${gameState.currentRange.min + 1}~${gameState.currentRange.max - 1}ä¹‹é—´çš„æ•°å­—`;
                feedback.className = 'text-center py-4 rounded-lg mb-6 text-xl font-bold bg-red-100 text-red-700 animate-shake';
                feedback.classList.remove('hidden');
                setTimeout(() => {
                    feedback.classList.add('hidden');
                }, 2000);
                return;
            }
            
            // æ£€æŸ¥ç­”æ¡ˆ
            if (guess === gameState.answer) {
                // çŒœå¯¹äº†ï¼Œæ˜¾ç¤ºçˆ†ç‚¸é¡µé¢
                winnerText.textContent = `${player.name}çˆ†ç‚¸äº†ï¼`;
                answerText.innerHTML = `æ­£ç¡®ç­”æ¡ˆæ˜¯: <span class="text-primary font-bold">${gameState.answer}</span>`;
                
                // é‡ç½®çˆ†ç‚¸åŠ¨ç”»
                const explosion = document.querySelector('.explosion');
                explosion.style.animation = 'none';
                setTimeout(() => {
                    explosion.style.animation = 'explode 1.5s ease-out forwards';
                }, 10);
                
                gameScreen.classList.add('hidden');
                explosionScreen.classList.remove('hidden');
            } else if (guess < gameState.answer) {
                // çŒœå°äº†
                gameState.currentRange.min = guess;
                showFeedback(`${player.name}çŒœçš„æ•°å­—å°äº†ï¼`, 'bg-blue-100', 'text-blue-700');
            } else {
                // çŒœå¤§äº†
                gameState.currentRange.max = guess;
                showFeedback(`${player.name}çŒœçš„æ•°å­—å¤§äº†ï¼`, 'bg-red-100', 'text-red-700');
            }
            
            // æ›´æ–°èŒƒå›´æ˜¾ç¤º
            rangeDisplay.textContent = `${gameState.currentRange.min} ~ ${gameState.currentRange.max}`;
            
            // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªç©å®¶
            gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % gameState.players.length;
            updateCurrentPlayer();
        }
        
        // æ˜¾ç¤ºåé¦ˆ
        function showFeedback(message, bgClass, textClass) {
            feedback.textContent = message;
            feedback.className = `text-center py-4 rounded-lg mb-6 text-xl font-bold ${bgClass} ${textClass} animate-fade-in`;
            feedback.classList.remove('hidden');
            
            setTimeout(() => {
                feedback.classList.add('hidden');
            }, 2000);
        }
        
        // æ›´æ–°å½“å‰ç©å®¶
        function updateCurrentPlayer() {
            gameState.players.forEach((player, index) => {
                const container = player.guessInput.closest('.guess-input-container');
                if (index === gameState.currentPlayerIndex) {
                    container.classList.remove('bg-gray-50');
                    container.classList.add('bg-yellow-50', 'border-2', 'border-primary');
                    player.guessInput.classList.remove('opacity-50', 'cursor-not-allowed');
                    player.guessInput.disabled = false;
                    player.guessBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    player.guessBtn.disabled = false;
                    player.guessInput.focus();
                } else {
                    container.classList.remove('bg-yellow-50', 'border-2', 'border-primary');
                    container.classList.add('bg-gray-50');
                    player.guessInput.classList.add('opacity-50', 'cursor-not-allowed');
                    player.guessInput.disabled = true;
                    player.guessBtn.classList.add('opacity-50', 'cursor-not-allowed');
                    player.guessBtn.disabled = true;
                }
            });
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState.currentRange = { min: 0, max: gameState.maxNumber };
            gameState.currentPlayerIndex = 0;
            
            // éšè—çˆ†ç‚¸é¡µé¢ï¼Œæ˜¾ç¤ºæ¬¢è¿é¡µé¢
            explosionScreen.classList.add('hidden');
            welcomeScreen.classList.remove('hidden');
            
            // é‡ç½®è¾“å…¥
            customRangeValue.value = '';
            
            // é‡æ–°ç”Ÿæˆç©å®¶è¾“å…¥æ¡†
            const activePlayerCountBtn = document.querySelector('.player-count-btn.bg-primary');
            if (activePlayerCountBtn) {
                const playerCount = parseInt(activePlayerCountBtn.dataset.count, 10);
                generatePlayerInputs(playerCount);
            }
        }
    </script>
</body>
</html>
    